<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TCG BinderDex â€¢ Binder</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="logo">TCG</div>
      <div class="brand-text">
        <div class="brand-title">BinderDex</div>
        <div class="brand-subtitle">bender 3Ã—3 â€¢ drag & drop</div>
      </div>
    </div>

    <nav class="nav">
      <button class="nav-btn" onclick="window.location.href='index.html'">ColeÃ§Ã£o</button>
      <button class="nav-btn" onclick="goToSearch()">Buscar</button>
      <button class="nav-btn active" aria-current="page">FichÃ¡rio</button>
      <span id="readonlyBadge" class="badge badge-lock" style="display:none;">SOMENTE LEITURA</span>
    </nav>
  </header>

  <main class="container">
    <section class="panel">
      <div class="panel-row">
        <div class="select-wrap">
          <label class="field-label">FichÃ¡rio</label>
          <select id="binderSelect" onchange="selectBinderBySelect('binderSelect', loadCollection)"></select>
        </div>

        <div class="toolbar">
          <button class="icon-btn" title="Novo FichÃ¡rio" onclick="createBinder('binderSelect', loadCollection)">â•</button>
          <button class="icon-btn" title="Renomear" onclick="renameBinder('binderSelect')">âœï¸</button>
          <button class="icon-btn" title="Duplicar" onclick="duplicateBinder('binderSelect', loadCollection)">ğŸ“‹</button>
          <button class="icon-btn" title="Somente leitura" onclick="toggleReadonly('binderSelect').then(refreshReadonlyUi)">ğŸ”’</button>
          <button class="icon-btn" title="Modo ediÃ§Ã£o (layout)" onclick="toggleLayoutMode()" id="layoutModeBtn" aria-pressed="false">ğŸ§©</button>
          <button class="icon-btn" title="Favorito" onclick="setFavorite('binderSelect')">â­</button>
          <button class="icon-btn" title="Exportar JSON" onclick="exportBinderJSON('binderSelect')">ğŸ“¤</button>
          <button class="icon-btn" title="Exportar PDF" onclick="exportBinderPDF('binderSelect')">ğŸ“„</button>
          <button class="icon-btn danger" title="Excluir FichÃ¡rio" onclick="deleteBinder('binderSelect', loadCollection)">ğŸ—‘ï¸</button>
        </div>
      </div>

      <span class="mode-indicator" id="layoutModeIndicator" style="display:none;">MODO EDIÃ‡ÃƒO ATIVO</span>

      <div class="pager">
        <button class="btn" onclick="prevPage()">â¬…</button>
        <span id="pageInfo" class="pager-info"></span>
        <button class="btn" onclick="nextPage()">â¡</button>
      </div>
    </section>

    <section class="binder-wrap">
      <div class="binder" id="binder"></div>
    </section>

    <section class="hint">
      <span class="hint-dot"></span>
      Duplo clique na carta para abrir detalhes. Clique uma vez para aÃ§Ãµes (Excluir / Mover de pÃ¡gina). Para mover/reorganizar, ative ğŸ§© (modo ediÃ§Ã£o).
    </section>
  </main>

  <!-- Modal de detalhes -->
  <div id="cardModal" class="modal" style="display:none;">
    <div class="modal-backdrop" onclick="closeCardModal()"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Detalhes da carta">
      <div class="modal-header">
        <div class="modal-title">Detalhes</div>
        <button class="icon-btn" onclick="closeCardModal()" title="Fechar">âœ•</button>
      </div>
      <div id="cardModalBody" class="modal-body"></div>
    </div>
  </div>

  <script>
  window.API_BASE = "https://binderdex.onrender.com/";
  </script>

  <script src="js/common.js"></script>
  <script src="js/binder.js"></script>
</body>
</html>
